currentBuild.displayName =" javahometech course app #" + currentBuild.number
pipeline{
     
    agent any
    
    environment {
     PATH="/usr/share/apache-maven/bin:$PATH"
     }
     
    stages{
        stage('Scm Checkout'){
            steps{
                git 'https://github.com/krishank98/my-app.git'
            }
        }
        stage('Maven build'){
        steps{
        sh "mvn clean package"
        }
    }
    
      stage('Deploy to Tomcat'){
          steps{
      sshagent(['tomcat-server-slave1']) {
         sh """
         scp -o StrictHostKeyChecking=no target/*.war ec2-user@172.31.7.40:/var/lib/tomcat/webapps
        
         """
      }
   }
    }
    }
}
